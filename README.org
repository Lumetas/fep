* FEP 
:PROPERTIES:
:DESCRIPTION: Простой текстовый редактор с vi-подобным интерфейсом на Bash
:END:

** Оглавление
- [[#описание][Описание]]
- [[#особенности][Особенности]]
- [[#установка][Установка]]
- [[#использование][Использование]]
- [[#горячие-клавиши][Горячие клавиши]]
- [[#конфигурация][Конфигурация]]
- [[#примеры][Примеры]]
- [[#известные-проблемы][Известные проблемы]]
- [[#разработка][Разработка]]
- [[#лицензия][Лицензия]]

** Описание
FEP - это простой текстовый редактор, написанный на Bash, с vi-подобным интерфейсом. Редактор предоставляет базовые функции редактирования текста с использованием терминала.

** Особенности

*** Основные возможности
- Редактирование текстовых файлов в терминале
- Vi-подобные команды навигации
- Визуальный режим выделения текста
- Режим вставки с подсветкой курсора
- Подсветка выделенного текста

*** Режимы редактирования
- *Нормальный режим*: навигация и команды
- *Режим вставки*: ввод текста
- *Визуальный режим*: выделение текста
- *Режим редактирования*: Неинтерактивный режим редактирования
- *Режим удаления*: Неинтерактивный режим удаления
- *Командный режим*: расширенные команды

*** Поддерживаемые операции
- Создание, удаление, редактирование строк
- Поиск символов в тексте
- Выделение и удаление текста
- Сохранение файлов
- Навигация по строкам и символам

** Установка

*** Требования
- Bash 4.0+
- Стандартные утилиты Unix (sed, dd, mktemp, cp, mv)
- Терминал с поддержкой ANSI escape-кодов

*** Установка редактора
#+BEGIN_SRC bash
# Скачайте скрипт
curl -O https://example.com/fep.sh

# Сделайте исполняемым
chmod +x fep.sh

# Поместите в PATH (опционально)
sudo mv fep.sh /usr/local/bin/fep
#+END_SRC

** Использование

*** Базовое использование
#+BEGIN_SRC bash
./fep.sh файл.txt
# или
fep файл.txt
#+END_SRC

*** Создание нового файла
Если файл не существует, редактор предложит создать его.

** Горячие клавиши


*** Режим редактирования
Это неинтерактивный режим. Для перехода нажмте =e= укажите диапазон и приступайте к редактированию.

*** Режим удаления
Это неинтерактивный режим. Для перехода нажмте =d= укажите диапазон указанное будет удалено.

*** Нормальный режим

| Клавиша | Действие                      |
|---------|-------------------------------|
| h       | Влево                         |
| j       | Вниз                          |
| k       | Вверх                         |
| l       | Вправо                        |
| i       | Режим вставки                 |
| I       | Вставка в начале строки       |
| a       | Вставка после курсора         |
| A       | Вставка в конце строки        |
| o       | Новая строка ниже + вставка   |
| O       | Новая строка выше + вставка   |
| v       | Визуальный режим              |
| :       | Командный режим               |
| f       | Поиск символа вперед          |
| F       | Поиск символа назад           |
| t       | Поиск до символа вперед       |
| T       | Поиск до символа назад        |
| g       | Переход к строке              |
| G       | Переход в конец файла         |
| 0       | Начало строки                 |
| $       | Конец строки                  |
| +       | Новая строка ниже (normal)    |
| -       | Новая строка выше (normal)    |
| d       | Удаление строк                |
| e       | Редактирование строк          |
| J       | Прокрутка вниз                |
| u       | Отмена редактирования         |
| Ctrl+r  | Повтор редактирования         |
| K       | Прокрутка вверх               |
| q       | Подсказка о выходе            |

*** Режим вставки

| Клавиша      | Действие                     |
|--------------|------------------------------|
| ESC          | Выход в нормальный режим     |
| Backspace    | Удаление символа             |
| Tab          | Вставка 4 пробелов           |
| Остальные    | Ввод текста                  |

*** Визуальный режим

| Клавиша | Действие                      |
|---------|-------------------------------|
| v       | Выход из визуального режима   |
| h,j,k,l | Навигация и выделение         |
| d       | Удалить выделенное            |
| :       | Команда с выделенным текстом  |

*** Командный режим

| Команда | Действие                      |
|---------|-------------------------------|
| w       | Сохранить файл                |
| q       | Выйти из редактора            |
| wq      | Сохранить и выйти             |
| *       | Произвольная shell-команда    |

** Диапазоны
| Диапазон | Описание |
|----------|----------|
| .        | Текущая строка |
| +        | Следующая строка |
| -        | Предыдущая строка |
| 52       | Строка номер 52 |
| 5..8     | Строки с пятой по восьмую |
| 5.       | Строка между пятой и шестой |
| 5..      | Строка между четвертой и пятой |

Некоторые диапазоны в режиме редактирования и удаления могут работать по разному. Например. В режиме редактирования =+= это строка между текущей и следующей строкой. В режиме удаления =+= это следующая строка. Такая же ситуация С =-= . Диапазоны =5.= и =5..= недоступны при удалении.



** Конфигурация

*** Структура конфигурации
FEP использует конфигурационные файлы в директории =~/.config/fep/=

*** Конфигурационные файлы
- =start=: Выполняется при запуске
- =startiter=: Выполняется в начале каждой итерации
- =enditer=: Выполняется в конце каждой итерации
- =premain=: Выполняется перед основным циклом

*** Пример конфигурации
#+BEGIN_SRC bash
# ~/.config/fep/start
echo "Добро пожаловать в FEP!"

# ~/.config/fep/startiter
# Дополнительные действия перед отрисовкой
#+END_SRC

** Примеры

*** Базовое редактирование
1. Запустите редактор: ~fep file.txt~
2. Нажмите ~i~ для перехода в режим вставки
3. Введите текст
4. Нажмите ~ESC~ для возврата в нормальный режим
5. Нажмите ~:wq~ для сохранения и выхода

*** Работа с визуальным режимом
1. Нажмите ~v~ для входа в визуальный режим
2. Выделите текст с помощью ~h,j,k,l~
3. Нажмите ~d~ для удаления выделенного текста
4. Или нажмите ~:~ и введите команду для обработки выделенного текста

*** Поиск текста
1. В нормальном режиме нажмите ~f~
2. Введите символ для поиска вперед
3. Или ~F~ для поиска назад

** Известные проблемы

*** Ограничения
- Нет поддержки отмены действий (undo)
- Ограниченная работа с большими файлами
- Нет подсветки синтаксиса
- Нет поддержки мыши

*** Проблемы с кодировкой
- Могут быть проблемы с некоторыми UTF-8 символами
- Ограниченная поддержка специальных символов

** Разработка

*** Структура проекта
#+BEGIN_SRC
fep.sh                 # Основной скрипт редактора
~/.config/fep/         # Директория конфигурации
  ├── start           # Конфиг запуска
  ├── startiter       # Конфиг итерации
  ├── enditer         # Конфиг конца итерации
  └── premain         # Конфиг предварительной настройки
#+END_SRC

*** Основные функции
- =openFile()=: Загрузка файла в память
- =rewrite()=: Перерисовка интерфейса
- =insertMode()=: Режим вставки
- =visualMode()=: Визуальный режим
- =commandMode()=: Командный режим

*** Расширение функциональности
Для добавления новых функций:
1. Добавьте обработку клавиши в основной цикл
2. Реализуйте соответствующую функцию
3. Обновите документацию

** Лицензия
Этот проект распространяется под лицензией MIT. См. файл LICENSE для подробностей.

*Примечание: Это учебный проект, не предназначенный для использования в production-среде.*
